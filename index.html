<!DOCTYPE html>
<html>
<head>
    <title>Work Shift Scheduler</title>
    <style>
        /* Add your CSS here */
    </style>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['timeline']});
        google.charts.setOnLoadCallback(drawChart);

        var dataTable;
        var shifts = [];
        var positions = [];
        var associates = [];

        function drawChart() {
            var container = document.getElementById('chart_div');
            var chart = new google.visualization.Timeline(container);

            dataTable = new google.visualization.DataTable();
            dataTable.addColumn({ type: 'string', id: 'Position' });
            dataTable.addColumn({ type: 'string', id: 'Associate' });
            dataTable.addColumn({ type: 'date', id: 'Start' });
            dataTable.addColumn({ type: 'date', id: 'End' });

            chart.draw(dataTable);
        }

        function addShift() {
            var positionSelect = document.getElementById('position');
            var associateSelect = document.getElementById('associate');
            var position = positionSelect.options[positionSelect.selectedIndex].text;
            var associate = associateSelect.options[associateSelect.selectedIndex].text;
            var start = new Date('1970-01-01T' + document.getElementById('start').value + ':00');
            var end = new Date('1970-01-01T' + document.getElementById('end').value + ':00');

            dataTable.addRow([position, associate, start, end]);

            // Add shift to the shifts array
            shifts.push({
                position: position,
                associate: associate,
                start: start,
                end: end
            });

            // Update the shifts list
            updateShiftsList();

            drawChart();
        }

        function addNewPosition() {
            var newPosition = prompt("Enter new position");
            positions.push(newPosition);
            updatePositions();
        }

        function addNewAssociate() {
            var newAssociate = prompt("Enter new associate");
            associates.push(newAssociate);
            updateAssociates();
        }

        function updatePositions() {
            var select = document.getElementById('position');
            select.innerHTML = '';
            positions.forEach(position => {
                var option = document.createElement("option");
                option.text = position;
                select.add(option);
            });
        }

        function updateAssociates() {
            var select = document.getElementById('associate');
            select.innerHTML = '';
            associates.forEach(associate => {
                var option = document.createElement("option");
                option.text = associate;
                select.add(option);
            });
        }

        function deleteShift(index) {
            shifts.splice(index, 1);

            dataTable.removeRow(index);
            updateShiftsList();

            drawChart();
        }

        function updateShiftsList() {
            var shiftsList = document.getElementById('shifts-list');
            shiftsList.innerHTML = '';

            shifts.forEach((shift, index) => {
                shiftsList.innerHTML += '<li>' + shift.position + ', ' + shift.associate + ', ' + shift.start + ', ' + shift.end + ' <button onclick="deleteShift(' + index + ')">Delete</button></li>';
            });
        }
    </script>
</head>
<body>
    <div id="chart_div"></div>
    <form onsubmit="event.preventDefault(); addShift();">
        <label for="position">Position:</label>
        <select id="position">
            <!-- Positions will be dynamically added here -->
        </select>
        <button type="button" onclick="addNewPosition()">Add new position</button>
        <br>
        <label for="associate">Associate:</label>
        <select id="associate">
            <!-- Associates will be dynamically added here -->
        </select>
        <button type="button" onclick="addNewAssociate()">Add new associate</button>
        <br>
        <label for="start">Start time:</label>
        <input type="time" id="start" required>
        <label for="end">End time:</label>
        <input type="time" id="end" required>
        <input type="submit" value="Add Shift">
    </form>
    <h3>Shifts:</h3>
    <ul id="shifts-list"></ul>
</body>
</html>
